---
title: "randomizer"
output: html_document
---

```{r}
library(readxl)
#library(marginaleffects)
library(dplyr)
library(sandwich)   # for robust SEs
library(lmtest)     # for coeftest()
library(tidyverse)
```

```{r}
path <- "Experiment_Data .xlsx"
init_data <- read_excel(path, sheet = "Consolidated Data - Static")    # by name
init_data
```

```{r}
set.seed(22)
```

```{r}
# Create dog IDs
print(nrow(init_data %>%  filter(init_data$'Pre-Treatment Description' == "No")))
stigma_dogs <- init_data %>%
  filter(init_data$'Breed Group'=="Stigma", init_data$'Pre-Treatment Description' == "No")
stigma_dogs = stigma_dogs$Rescue_ID
length(stigma_dogs)
nonstigma_dogs <- init_data %>%
  filter(init_data$'Breed Group'=="Non-Stigma", init_data$'Pre-Treatment Description' == "No")
nonstigma_dogs = nonstigma_dogs$Rescue_ID
length(nonstigma_dogs)
```


```{r}
# Randomly assign 50% of each sex to treatment
stigma_treatment <- sample(male_dogs, size = floor(length(stigma_dogs) / 2))
length(stigma_treatment)
nonstigma_treatment <- sample(female_dogs, size = floor(length(nonstigma_dogs) / 2))
length(nonstigma_treatment)
```


```{r}
# Create a vector of treatment IDs
treatment_ids <- c(stigma_treatment, nonstigma_treatment)

# Assign Treatment = 1 if DogID is in treatment_ids, else 0
init_data$Treatment <- ifelse(init_data$Rescue_ID %in% treatment_ids, 1, 0)
```

```{r}
init_data
```

```{r}
write.csv(init_data, file = "InitialRandom_10_07_25.csv", row.names = FALSE)
```


ALL ADDITIONAL RANDOMIZATIONS WILL BE DONE ON A BATCH/TWICE WEEKLY BASIS
